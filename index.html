<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cookies by JC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root{--pink:#ff69b4;--pink-light:#ffb6c1;--white:#ffffff;}
        *{box-sizing:border-box;margin:0;padding:0;}
        body{font-family:'Quicksand',sans-serif;background:#ffeef8 url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" opacity="0.15"><rect width="8" height="8" fill="%23ff85a2"/><path d="M0 4h8M4 0v8" stroke="%23ffffff" stroke-width="2"/></svg>');background-size:8px 8px;color:#555;min-height:100vh;}
        .header{text-align:center;padding:2rem 1rem 1.5rem;}
        .header h1{font-size:clamp(2rem,8vw,2.8rem);color:var(--pink);letter-spacing:1px;text-shadow:1px 1px 2px rgba(0,0,0,.1);}
        .header p{color:var(--pink-light);font-size:clamp(.95rem,4vw,1.2rem);margin-top:.25rem;}
        .container{max-width:600px;margin:0 auto 2rem;padding:0 1rem;}
        .card{background:var(--white);border-radius:26px;box-shadow:0 8px 30px rgba(255,133,162,.35);padding:clamp(1.2rem,5vw,2.2rem);}
        .card h2{text-align:center;color:var(--pink);margin-bottom:1.2rem;font-size:clamp(1.4rem,6vw,1.9rem);}
        label{display:block;color:var(--pink);font-weight:700;margin:1rem 0 .3rem;}
        input{width:100%;padding:.85rem 1rem;border:2px solid var(--pink-light);border-radius:16px;font-size:1rem;font-family:'Quicksand',sans-serif;background:#fff5f8;transition:.2s;}
        input:focus{border-color:var(--pink);outline:none;box-shadow:0 0 0 3px rgba(255,105,180,.18);}
        .cookie-set{border:1px dashed var(--pink-light);border-radius:16px;padding:.8rem 1rem;margin-bottom:.8rem;position:relative;}
        .remove-btn{position:absolute;right:8px;top:8px;background:var(--pink-light);color:#fff;border:none;border-radius:50%;width:24px;height:24px;font-size:.9rem;cursor:pointer;line-height:1;}
        #addCookie{background:transparent;border:2px dashed var(--pink-light);color:var(--pink);font-weight:700;padding:.5rem;border-radius:16px;cursor:pointer;width:100%;margin-bottom:1rem;transition:.2s;}#addCookie:hover{background:#fff0f5;}
        .qty-stepper{display:flex;align-items:center;gap:.5rem;margin-top:.4rem;}
        .qty-btn{width:36px;height:36px;border:2px solid var(--pink-light);background:#fff5f8;border-radius:50%;font-size:1.3rem;color:var(--pink);cursor:pointer;transition:.2s;}
        .qty-btn:hover{background:var(--pink-light);color:#fff;}
        .qty-input{width:60px;text-align:center;font-weight:700;border:2px solid var(--pink-light);border-radius:12px;padding:.4rem;}
        .submit-btn{width:100%;padding:1rem;background:linear-gradient(135deg,var(--pink) 0%,#ff1493 100%);color:#fff;font-size:1.25rem;font-weight:700;border:none;border-radius:50px;cursor:pointer;box-shadow:0 4px 18px rgba(255,20,147,.35);transition:.25s;}
        .submit-btn:hover{transform:translateY(-2px);box-shadow:0 6px 24px rgba(255,20,147,.45);}
        .success-message{display:none;text-align:center;padding:1.5rem;background:#d4fcdd;color:#2e7d32;border-radius:20px;margin-top:1.2rem;font-size:1.1rem;}
        @media (max-width:600px){.header h1{font-size:2.2rem;}.card{padding:1.5rem;}}
    </style>
</head>
<body>
    <header class="header">
        <h1>Cookies by JC</h1>
        <p>homemade</p>
    </header>

    <div class="container">
        <div class="card">
            <h2>Order Form</h2>
            <form id="cookieForm" action="https://formspree.io/f/mqargwlv" method="POST">
                <label for="name">Your Name *</label>
                <input type="text" id="name" name="name" required placeholder="Jessica Cruz">

                <label for="instagram">Instagram Handle *</label>
                <input type="text" id="instagram" name="instagram" required placeholder="@cookiesbyjc">

                <label>Cookie Order(s) *</label>
                <div id="cookieOrders">
                    <div class="cookie-set" data-index="0">
                        <select name="cookieType_0" required>
                            <option value="">— pick a cookie —</option>
                            <option value="Red Velvet $3">Red Velvet – $3</option>
                            <option value="Cookies & Creme $3">Cookies & Creme – $3</option>
                            <option value="S'mores $3">S'mores – $3</option>
                            <option value="Ferrero Rocher $3">Ferrero Rocher – $3</option>
                            <option value="Fruity Pebbles $3">Fruity Pebbles – $3</option>
                            <option value="S'mores Brookie $3">S'mores Brookie – $3</option>
                            <option value="Cookie Monster $3">Cookie Monster – $3</option>
                            <option value="Circus Animal $3">Circus Animal – $3</option>
                        </select>
                        <div class="qty-stepper">
                            <button type="button" class="qty-btn" onclick="changeQty(0,-1)">−</button>
                            <input type="number" id="qtyVal_0" class="qty-input" value="1" min="1" max="99" readonly>
                            <button type="button" class="qty-btn" onclick="changeQty(0,1)">+</button>
                        </div>
                    </div>
                </div>

                <button type="button" id="addCookie">+ Add Another Cookie</button>
                <button type="submit" class="submit-btn">Place Order</button>
            </form>

            <div id="successMessage" class="success-message">Thank you for ordering!</div>
        </div>
    </div>

    <script>
        let nextIndex = 1;
        const orderWrap = document.getElementById('cookieOrders');
        const options = `
            <option value="Red Velvet $3">Red Velvet – $3</option>
            <option value="Cookies & Creme $3">Cookies & Creme – $3</option>
            <option value="S'mores $3">S'mores – $3</option>
            <option value="Ferrero Rocher $3">Ferrero Rocher – $3</option>
            <option value="Fruity Pebbles $3">Fruity Pebbles – $3</option>
            <option value="S'mores Brookie $3">S'mores Brookie – $3</option>
            <option value="Cookie Monster $3">Cookie Monster – $3</option>
            <option value="Circus Animal $3">Circus Animal – $3</option>`;

        document.getElementById('addCookie').addEventListener('click', () => {
            const div = document.createElement('div');
            div.className = 'cookie-set';
            div.dataset.index = nextIndex;
            div.innerHTML = `
                <button class="remove-btn" type="button" onclick="this.parentElement.remove()">×</button>
                <select name="cookieType_${nextIndex}" required>
                    <option value="">— pick a cookie —</option>${options}
                </select>
                <div class="qty-stepper">
                    <button type="button" class="qty-btn" onclick="changeQty(${nextIndex},-1)">−</button>
                    <input type="number" id="qtyVal_${nextIndex}" class="qty-input" value="1" min="1" max="99" readonly>
                    <button type="button" class="qty-btn" onclick="changeQty(${nextIndex},1)">+</button>
                </div>
            `;
            orderWrap.appendChild(div);
            nextIndex++;
        });

        function changeQty(idx, delta) {
            const inp = document.getElementById('qtyVal_' + idx);
            let val = parseInt(inp.value, 10) + delta;
            if (val < 1) val = 1;
            if (val > 99) val = 99;
            inp.value = val;
        }

        /* ---------- send ONLY orderSummary ---------- */
        document.getElementById('cookieForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const sets = orderWrap.querySelectorAll('.cookie-set');
            let lines = [];
            sets.forEach((set, i) => {
                const type = set.querySelector('select[name^="cookieType"]').value;
                const qty  = document.getElementById('qtyVal_' + i).value;
                if (type && qty) lines.push(`${qty} × ${type}`);
            });
            const orderSummary = lines.join(' | ') || 'No cookies selected';

            let bundleInput = document.querySelector('input[name="orderSummary"]');
            if (!bundleInput) {
                bundleInput = document.createElement('input');
                bundleInput.type = 'hidden';
                bundleInput.name = 'orderSummary';
                this.appendChild(bundleInput);
            }
            bundleInput.value = orderSummary;

            const btn = this.querySelector('.submit-btn');
            btn.textContent = 'Sending...';
            btn.disabled = true;

            fetch(this.action, {
                method: 'POST',
                body: new FormData(this),
                headers: { 'Accept': 'application/json' }
            })
            .then(r => {
                if (r.ok) {
                    this.style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                } else throw new Error();
            })
            .catch(() => {
                alert('Something went wrong – please try again!');
                btn.textContent = 'Place Order';
                btn.disabled = false;
            });
        });
    </script>
</body>
</html>
